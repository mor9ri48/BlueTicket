<% @page_title = "予約状況" %>
<h1><%= @page_title %></h1>

<p><%= link_to "顧客の詳細に戻る", [:admin, @customer] %></p>

<% if @bookings.present? %>
  <table>
    <thead>
      <tr>
        <th>予約No.</th>
        <th>便名</th>
        <th>クラス</th>
        <th>座席</th>
        <th>料金</th>
        <th>決済情報</th>
        <th>チェックイン状況</th>
      </tr>
    </thead>
    <tbody>
      <% @bookings.each do |booking| %>
        <tr>
          <td style="text-align: center"><%= booking.id %></td>
          <td><%= link_to Flight.where(id: booking.flight_id)[0].name, [:admin, @customer, booking] %></td>
          <td><%= Seat.find_by(id: booking.booking_seat_flight_id).seat_class %></td>
          <td><%= Seat.find_by(id: booking.booking_seat_flight_id).number %></td>
          <td style="text-align: center"><%= booking.total_price %></td>
          <td style="text-align: center"><%= booking.payment_method %></td>
          <td style="text-align: center">
            <% if BookingSeatFlight.where(id: booking.booking_seat_flight_id)[0].checkin %>◯
            <% else %>×
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
<% else %>
  <p>現在、承った予約はありません。</p>
<% end %>